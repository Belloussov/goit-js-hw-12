{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getPhotos(inputValue, currentPage) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const params = {\n    key: '42985160-4d9b5f931f1b68b881db47de1',\n    q: inputValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: currentPage,\n  };\n  const url = `${BASE_URL}${END_POINT}`;\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","export function photosTemplate(photos) {\n  return photos\n    .map(\n      photo => `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${photo.largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${photo.webformatURL}\" alt=\"${photo.tags}\" />\n      </a>\n      <ul class=\"img-description\">\n        <li>\n          <h3>Likes</h3>\n          <p>${photo.likes}</p>\n        </li>\n        <li>\n          <h3>Views</h3>\n          <p>${photo.views}</p>\n        </li>\n        <li>\n          <h3>Comments</h3>\n          <p>${photo.comments}</p>\n        </li>\n        <li>\n          <h3>Downloads</h3>\n          <p>${photo.downloads}</p>\n        </li>\n      </ul>\n    </li>`\n    )\n    .join('');\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport axios from 'axios';\n\n//console.log(axios.isCancel('something'));\n\nimport { getPhotos } from './js/pixabay-api';\nimport { photosTemplate } from './js/render-functions';\n\n//===============================variables=================================\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst btnLoadMore = document.querySelector('.btn');\nconst preloader = document.querySelector('.loader');\nlet inputValue;\nlet currentPage = 1;\nlet maxPage = 0;\nconst perPage = 15;\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n//=============================function===========================================\n\nlightbox.on('show.simplelightbox', function () {});\n\nfunction checkBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideLoadMore();\n    iziToast.warning({\n      message: 'We are sorry, but you have reached the end of search results.',\n      color: 'blue',\n      position: 'topRight',\n    });\n  } else {\n    showLoadMore();\n  }\n}\nfunction myScroll() {\n  const height = gallery.firstChild.getBoundingClientRect().height;\n  console.log(height);\n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\nfunction showLoadMore() {\n  return btnLoadMore.classList.remove('is-hidden');\n}\nfunction hideLoadMore() {\n  return btnLoadMore.classList.add('is-hidden');\n}\n\nfunction showLoader() {\n  return preloader.classList.remove('is-hidden');\n}\nfunction hideLoader() {\n  return preloader.classList.add('is-hidden');\n}\nhideLoader();\nhideLoadMore();\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  inputValue = e.target.elements.search.value.trim();\n  if (inputValue === '') {\n    return iziToast.warning({\n      message: 'Please complete the field!',\n      color: 'red',\n      position: 'topRight',\n    });\n  }\n  gallery.innerHTML = '';\n  currentPage = 1;\n  showLoader();\n  try {\n    const photos = await getPhotos(inputValue, currentPage);\n    maxPage = Math.ceil(photos.totalHits / perPage);\n    const markup = photosTemplate(photos.hits);\n    if (photos.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        color: 'red',\n      });\n    \n    } else {\n      gallery.insertAdjacentHTML('beforeend', markup);\n      lightbox.refresh();\n       checkBtnStatus();\n    }\n  } catch (error) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n      color: 'red',\n    });\n  } finally {\n    hideLoader();\n    form.reset();\n  }\n});\n\nbtnLoadMore.addEventListener('click', async e => {\n  showLoader();\n  currentPage += 1;\n  const photos = await getPhotos(inputValue, currentPage);\n  const markup = photosTemplate(photos.hits);\n  gallery.insertAdjacentHTML('beforeend', markup);\n  myScroll();\n  lightbox.refresh();\n  hideLoader();\n  checkBtnStatus();\n});\n"],"names":["getPhotos","inputValue","currentPage","BASE_URL","END_POINT","params","url","axios","photosTemplate","photos","photo","form","gallery","btnLoadMore","preloader","maxPage","perPage","lightbox","SimpleLightbox","checkBtnStatus","hideLoadMore","iziToast","showLoadMore","myScroll","height","showLoader","hideLoader","e","markup"],"mappings":"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"}